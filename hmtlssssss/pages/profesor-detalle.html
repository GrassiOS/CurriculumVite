<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Detalles del Profesor - Sistema de Gestión Académica</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.11.0/font/bootstrap-icons.css">
    <link rel="stylesheet" href="../css/styles.css">
</head>
<body>
    <div class="wrapper">
        <!-- Sidebar -->
        <nav id="sidebar" class="active">
            <div class="sidebar-header">
                <h3>Gestor Académico</h3>
            </div>

            <ul class="list-unstyled components">
                <li>
                    <a href="../index.html">
                        <i class="bi bi-house-door"></i>
                        Dashboard
                    </a>
                </li>
                <li class="active">
                    <a href="profesores.html">
                        <i class="bi bi-person"></i>
                        Profesores
                    </a>
                </li>
                <li>
                    <a href="experiencia.html">
                        <i class="bi bi-briefcase"></i>
                        Experiencia
                    </a>
                </li>
                <li>
                    <a href="educacion.html">
                        <i class="bi bi-mortarboard"></i>
                        Educación
                    </a>
                </li>
                <li>
                    <a href="publicaciones.html">
                        <i class="bi bi-journal-text"></i>
                        Publicaciones
                    </a>
                </li>
                <li>
                    <a href="proyectos.html">
                        <i class="bi bi-lightbulb"></i>
                        Proyectos
                    </a>
                </li>
                <li>
                    <a href="tesis-dirigidas.html">
                        <i class="bi bi-file-earmark-text"></i>
                        Tesis Dirigidas
                    </a>
                </li>
                <li>
                    <a href="distinciones.html">
                        <i class="bi bi-award"></i>
                        Distinciones
                    </a>
                </li>
                <li>
                    <a href="asociaciones.html">
                        <i class="bi bi-people"></i>
                        Asociaciones
                    </a>
                </li>
            </ul>
        </nav>

        <!-- Page Content -->
        <div id="content">
            <nav class="navbar navbar-expand-lg navbar-light bg-light">
                <div class="container-fluid">
                    <button type="button" id="sidebarCollapse" class="btn btn-info">
                        <i class="bi bi-list"></i>
                    </button>
                    <div class="ms-auto">
                        
                    </div>
                </div>
            </nav>

            <div class="container-fluid">
                <!-- Header Section -->
                <div class="row mb-4">
                    <div class="col-md-12">
                        <div class="d-flex justify-content-between align-items-center">
                            <div class="d-flex align-items-center">
                                <a href="profesores.html" class="btn btn-outline-secondary me-3">
                                    <i class="bi bi-arrow-left"></i> Volver
                                </a>
                                <h2>Detalles del Profesor</h2>
                            </div>
                            <div>
                                <button class="btn btn-accent me-2" id="printCVBtn">
                                    <i class="bi bi-printer"></i> Imprimir CV
                                </button>
                                <a href="#" class="btn btn-info me-2" id="driveUrlBtn">
                                    <i class="bi bi-cloud"></i> Ver Drive
                                </a>
                                <button class="btn btn-primary" id="editProfileBtn">
                                    <i class="bi bi-pencil"></i> Editar Perfil
                                </button>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Profile Overview -->
                <div class="row mb-4">
                    <div class="col-md-3">
                        <div class="card">
                            <div class="card-body text-center">
                                <img id="professorPhoto" src="https://via.placeholder.com/200" class="rounded-circle mb-3" alt="Foto del profesor" style="width: 200px; height: 200px; object-fit: cover;">
                                <h4 id="professorName">Cargando...</h4>
                                <p class="text-muted" id="cuerpoAcademico">Cargando...</p>
                                <div class="d-grid gap-2" id="contactButtons">
                                    <!-- Los botones de contacto se generarán dinámicamente -->
                                </div>
                            </div>
                        </div>
                        
                        <!-- Documentos destacados -->
                        <div class="card mt-3">
                            <div class="card-header">
                                <h6 class="mb-0">
                                    <i class="bi bi-folder"></i> Documentos
                                </h6>
                            </div>
                            <div class="card-body">
                                <div id="documentosDestacados">
                                    <!-- Los documentos se cargarán dinámicamente -->
                                </div>
                            </div>
                        </div>
                    </div>
                    <div class="col-md-9">
                        <div class="card">
                            <div class="card-body">
                                <div class="row">
                                    <div class="col-md-8">
                                        <h5 class="mb-3">Semblanza</h5>
                                        <p id="professorSemblanza">Cargando información...</p>
                                        
                                        <h6 class="mb-3 mt-4">Información de Contacto</h6>
                                        <div id="contactosInfo">
                                            <!-- La información de contacto se cargará dinámicamente -->
                                        </div>
                                    </div>
                                    <div class="col-md-4">
                                        <h5 class="mb-3">Estadísticas</h5>
                                        <div class="row profile-stats">
                                            <div class="col-6 mb-3">
                                                <div class="card bg-primary text-white">
                                                    <div class="card-body p-3 text-center">
                                                        <h6 class="mb-1">Educación</h6>
                                                        <h4 class="mb-0" id="statEducacion">0</h4>
                                                    </div>
                                                </div>
                                            </div>
                                            <div class="col-6 mb-3">
                                                <div class="card bg-success text-white">
                                                    <div class="card-body p-3 text-center">
                                                        <h6 class="mb-1">Experiencia</h6>
                                                        <h4 class="mb-0" id="statExperiencia">0</h4>
                                                    </div>
                                                </div>
                                            </div>
                                            <div class="col-6 mb-3">
                                                <div class="card bg-info text-white">
                                                    <div class="card-body p-3 text-center">
                                                        <h6 class="mb-1">Publicaciones</h6>
                                                        <h4 class="mb-0" id="statPublicaciones">0</h4>
                                                    </div>
                                                </div>
                                            </div>
                                            <div class="col-6 mb-3">
                                                <div class="card bg-warning text-white">
                                                    <div class="card-body p-3 text-center">
                                                        <h6 class="mb-1">Proyectos</h6>
                                                        <h4 class="mb-0" id="statProyectos">0</h4>
                                                    </div>
                                                </div>
                                            </div>
                                            <div class="col-6 mb-3">
                                                <div class="card bg-secondary text-white">
                                                    <div class="card-body p-3 text-center">
                                                        <h6 class="mb-1">Tesis Dirigidas</h6>
                                                        <h4 class="mb-0" id="statTesis">0</h4>
                                                    </div>
                                                </div>
                                            </div>
                                            <div class="col-6 mb-3">
                                                <div class="card bg-dark text-white">
                                                    <div class="card-body p-3 text-center">
                                                        <h6 class="mb-1">Distinciones</h6>
                                                        <h4 class="mb-0" id="statDistinciones">0</h4>
                                                    </div>
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Tabs Section -->
                <div class="row">
                    <div class="col-md-12">
                        <div class="card">
                            <div class="card-body">
                                <ul class="nav nav-tabs" id="professorTabs" role="tablist">
                                    <li class="nav-item">
                                        <a class="nav-link active" id="educacion-tab" data-bs-toggle="tab" href="#educacion">
                                            <i class="bi bi-mortarboard"></i> Educación
                                        </a>
                                    </li>
                                    <li class="nav-item">
                                        <a class="nav-link" id="experiencia-tab" data-bs-toggle="tab" href="#experiencia">
                                            <i class="bi bi-briefcase"></i> Experiencia
                                        </a>
                                    </li>
                                    <li class="nav-item">
                                        <a class="nav-link" id="publicaciones-tab" data-bs-toggle="tab" href="#publicaciones">
                                            <i class="bi bi-journal-text"></i> Publicaciones
                                        </a>
                                    </li>
                                    <li class="nav-item">
                                        <a class="nav-link" id="proyectos-tab" data-bs-toggle="tab" href="#proyectos">
                                            <i class="bi bi-lightbulb"></i> Proyectos
                                        </a>
                                    </li>
                                    <li class="nav-item">
                                        <a class="nav-link" id="tesis-tab" data-bs-toggle="tab" href="#tesis">
                                            <i class="bi bi-file-earmark-text"></i> Tesis Dirigidas
                                        </a>
                                    </li>
                                    <li class="nav-item">
                                        <a class="nav-link" id="distinciones-tab" data-bs-toggle="tab" href="#distinciones">
                                            <i class="bi bi-award"></i> Distinciones
                                        </a>
                                    </li>
                                    <li class="nav-item">
                                        <a class="nav-link" id="asociaciones-tab" data-bs-toggle="tab" href="#asociaciones">
                                            <i class="bi bi-people"></i> Asociaciones
                                        </a>
                                    </li>
                                </ul>

                                <div class="tab-content mt-4" id="professorTabsContent">
                                    <!-- Educación -->
                                    <div class="tab-pane fade show active" id="educacion">
                                        <div class="d-flex justify-content-between align-items-center mb-3">
                                            <h6>Formación Académica</h6>
                                            <button class="btn btn-sm btn-primary" onclick="addEducacion()">
                                                <i class="bi bi-plus"></i> Agregar
                                            </button>
                                        </div>
                                        <div class="timeline" id="educacionContent">
                                            <!-- El contenido se cargará dinámicamente -->
                                        </div>
                                    </div>

                                    <!-- Experiencia -->
                                    <div class="tab-pane fade" id="experiencia">
                                        <div class="d-flex justify-content-between align-items-center mb-3">
                                            <h6>Experiencia Profesional</h6>
                                            <button class="btn btn-sm btn-primary" onclick="addExperiencia()">
                                                <i class="bi bi-plus"></i> Agregar
                                            </button>
                                        </div>
                                        <div class="timeline" id="experienciaContent">
                                            <!-- El contenido se cargará dinámicamente -->
                                        </div>
                                    </div>

                                    <!-- Publicaciones -->
                                    <div class="tab-pane fade" id="publicaciones">
                                        <div class="d-flex justify-content-between align-items-center mb-3">
                                            <h6>Publicaciones</h6>
                                            <button class="btn btn-sm btn-primary" onclick="addPublicacion()">
                                                <i class="bi bi-plus"></i> Agregar
                                            </button>
                                        </div>
                                        <div id="publicacionesContent">
                                            <!-- El contenido se cargará dinámicamente -->
                                        </div>
                                    </div>

                                    <!-- Proyectos -->
                                    <div class="tab-pane fade" id="proyectos">
                                        <div class="d-flex justify-content-between align-items-center mb-3">
                                            <h6>Proyectos de Investigación</h6>
                                            <button class="btn btn-sm btn-primary" onclick="addProyecto()">
                                                <i class="bi bi-plus"></i> Agregar
                                            </button>
                                        </div>
                                        <div id="proyectosContent">
                                            <!-- El contenido se cargará dinámicamente -->
                                        </div>
                                    </div>

                                    <!-- Tesis Dirigidas -->
                                    <div class="tab-pane fade" id="tesis">
                                        <div class="d-flex justify-content-between align-items-center mb-3">
                                            <h6>Tesis Dirigidas</h6>
                                            <button class="btn btn-sm btn-primary" onclick="addTesis()">
                                                <i class="bi bi-plus"></i> Agregar
                                            </button>
                                        </div>
                                        <div id="tesisContent">
                                            <!-- El contenido se cargará dinámicamente -->
                                        </div>
                                    </div>

                                    <!-- Distinciones -->
                                    <div class="tab-pane fade" id="distinciones">
                                        <div class="d-flex justify-content-between align-items-center mb-3">
                                            <h6>Distinciones y Reconocimientos</h6>
                                            <button class="btn btn-sm btn-primary" onclick="addDistincion()">
                                                <i class="bi bi-plus"></i> Agregar
                                            </button>
                                        </div>
                                        <div id="distincionesContent">
                                            <!-- El contenido se cargará dinámicamente -->
                                        </div>
                                    </div>

                                    <!-- Asociaciones -->
                                    <div class="tab-pane fade" id="asociaciones">
                                        <div class="d-flex justify-content-between align-items-center mb-3">
                                            <h6>Asociaciones y Membresías</h6>
                                            <button class="btn btn-sm btn-primary" onclick="addAsociacion()">
                                                <i class="bi bi-plus"></i> Agregar
                                            </button>
                                        </div>
                                        <div id="asociacionesContent">
                                            <!-- El contenido se cargará dinámicamente -->
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script>
    <script src="../js/main.js"></script>
    <script>
    // Datos de ejemplo completos para la nueva estructura de BD
    const profesoresData = {
        1: {
            profesorId: 1,
            nombre: 'Juan',
            apellido: 'Pérez',
            foto: 'https://via.placeholder.com/200',
            semblanza: 'Doctor en Ciencias con especialidad en Tecnología Educativa. Profesor titular con más de 15 años de experiencia en docencia e investigación. Ha dirigido múltiples proyectos de innovación educativa y cuenta con amplia experiencia en el desarrollo de plataformas digitales para el aprendizaje.',
            driveUrl: 'https://drive.google.com/drive/folders/ejemplo1',
            cuerpoAcademicoId: 1,
            cuerpoAcademico: 'Ingeniería de Software',
            carpetaDocumentosUrl: 'https://drive.google.com/drive/folders/docs1',
            contactos: [
                { tipoContacto: 'email', valor: 'juan.perez@uabc.edu.mx' },
                { tipoContacto: 'telefono', valor: '+52 646 123 4567' },
                { tipoContacto: 'extension', valor: '1234' },
                { tipoContacto: 'oficina', valor: 'Edificio A, Cubículo 201' },
                { tipoContacto: 'orcid', valor: '0000-0001-2345-6789' }
            ],
            educacion: [
                {
                    educacionId: 1,
                    nivel: 'Doctorado',
                    titulo: 'Doctor en Ciencias',
                    institucion: 'Universidad Nacional Autónoma de México',
                    especialidad: 'Tecnología Educativa',
                    pais: 'México',
                    anioInicio: 2015,
                    anioFin: 2019
                },
                {
                    educacionId: 2,
                    nivel: 'Maestría',
                    titulo: 'Maestro en Tecnología Educativa',
                    institucion: 'Instituto Politécnico Nacional',
                    especialidad: 'Sistemas Digitales',
                    pais: 'México',
                    anioInicio: 2012,
                    anioFin: 2014
                }
            ],
            experiencia: [
                {
                    experienciaId: 1,
                    puesto: 'Profesor Titular',
                    institucion: 'FIAD, UABC',
                    descripcion: 'Docencia e investigación en el área de tecnología educativa. Coordinación de proyectos de innovación académica.',
                    fechaInicio: '2020-01-01',
                    fechaFin: null
                }
            ],
            publicaciones: [
                {
                    publicacionId: 1,
                    titulo: 'Educación y Tecnología en América Latina: Perspectivas y Desafíos',
                    tipoPublicacion: 'Artículo de Investigación',
                    autores: 'Juan Pérez, María López, Carlos Hernández',
                    fuente: 'Revista Iberoamericana de Educación',
                    anio: 2022,
                    enlace: 'https://ejemplo.com/publicacion1'
                }
            ],
            proyectos: [
                {
                    proyectoId: 1,
                    titulo: 'Desarrollo de Plataforma de IA para Educación Personalizada',
                    rol: 'Investigador Principal',
                    institucion: 'UABC',
                    financiamiento: 'CONACYT',
                    periodoInicio: 2021,
                    periodoFin: 2023,
                    numeroProyecto: 'CB-2021-A1-S-12345'
                }
            ],
            tesisDirigidas: [
                {
                    tesisId: 1,
                    autor: 'Ana María González',
                    titulo: 'Implementación de Algoritmos de Machine Learning en Sistemas Educativos',
                    nivel: 'Maestría',
                    universidad: 'UABC',
                    anio: 2022
                }
            ],
            distinciones: [
                {
                    distincionId: 1,
                    nombre: 'Premio Nacional de Innovación Educativa',
                    institucion: 'SEP',
                    descripcion: 'Reconocimiento por contribuciones sobresalientes en el desarrollo de tecnologías educativas',
                    anio: 2021
                }
            ],
            asociaciones: [
                {
                    asociacionId: 1,
                    nombre: 'Asociación Mexicana de Tecnología Educativa',
                    rol: 'Miembro Activo',
                    periodoInicio: 2018,
                    periodoFin: null
                }
            ],
            documentos: [
                {
                    documentoId: 1,
                    titulo: 'CV Académico',
                    url: 'https://drive.google.com/file/d/ejemplo1',
                    descripcion: 'Currículum Vitae actualizado',
                    fechaSubida: '2023-01-15'
                }
            ]
        }
        // Agregar más profesores según sea necesario
    };

    let currentProfesor = null;

    // Obtener el id del profesor de la URL
    function getProfesorId() {
        const params = new URLSearchParams(window.location.search);
        return parseInt(params.get('id') || '1');
    }

    // Cargar datos del profesor
    function loadProfesorData() {
        const profesorId = getProfesorId();
        currentProfesor = profesoresData[profesorId];
        
        if (!currentProfesor) {
            document.body.innerHTML = '<div class="container mt-5"><div class="alert alert-danger">Profesor no encontrado</div></div>';
            return;
        }

        // Actualizar información básica
        document.getElementById('professorPhoto').src = currentProfesor.foto;
        document.getElementById('professorName').textContent = `${currentProfesor.nombre} ${currentProfesor.apellido}`;
        document.getElementById('cuerpoAcademico').textContent = currentProfesor.cuerpoAcademico || 'Sin cuerpo académico asignado';
        document.getElementById('professorSemblanza').textContent = currentProfesor.semblanza;
        
        // Configurar enlace de Drive
        const driveBtn = document.getElementById('driveUrlBtn');
        if (currentProfesor.driveUrl) {
            driveBtn.href = currentProfesor.driveUrl;
            driveBtn.target = '_blank';
        } else {
            driveBtn.style.display = 'none';
        }

        // Cargar estadísticas
        loadStatistics();
        
        // Cargar contactos
        loadContactos();
        
        // Cargar contenido de tabs
        loadEducacion();
        loadExperiencia();
        loadPublicaciones();
        loadProyectos();
        loadTesisDirigidas();
        loadDistinciones();
        loadAsociaciones();
        loadDocumentos();
    }

    // Cargar estadísticas
    function loadStatistics() {
        document.getElementById('statEducacion').textContent = currentProfesor.educacion?.length || 0;
        document.getElementById('statExperiencia').textContent = currentProfesor.experiencia?.length || 0;
        document.getElementById('statPublicaciones').textContent = currentProfesor.publicaciones?.length || 0;
        document.getElementById('statProyectos').textContent = currentProfesor.proyectos?.length || 0;
        document.getElementById('statTesis').textContent = currentProfesor.tesisDirigidas?.length || 0;
        document.getElementById('statDistinciones').textContent = currentProfesor.distinciones?.length || 0;
    }

    // Cargar información de contacto
    function loadContactos() {
        const contactosInfo = document.getElementById('contactosInfo');
        const contactButtons = document.getElementById('contactButtons');
        
        if (!currentProfesor.contactos || currentProfesor.contactos.length === 0) {
            contactosInfo.innerHTML = '<p class="text-muted">No hay información de contacto disponible.</p>';
            return;
        }

        // Información de contacto detallada
        contactosInfo.innerHTML = currentProfesor.contactos.map(contacto => {
            const iconMap = {
                'email': 'envelope',
                'telefono': 'telephone',
                'extension': 'telephone-plus',
                'oficina': 'geo-alt',
                'linkedin': 'linkedin',
                'orcid': 'person-badge',
                'researchgate': 'globe',
                'google_scholar': 'mortarboard'
            };
            
            const icon = iconMap[contacto.tipoContacto] || 'info-circle';
            const label = contacto.tipoContacto.charAt(0).toUpperCase() + contacto.tipoContacto.slice(1);
            
            return `
                <p class="mb-2">
                    <i class="bi bi-${icon} text-primary me-2"></i>
                    <strong>${label}:</strong> ${contacto.valor}
                </p>
            `;
        }).join('');

        // Botones de contacto principal
        const emailContacto = currentProfesor.contactos.find(c => c.tipoContacto === 'email');
        if (emailContacto) {
            contactButtons.innerHTML = `
                <a href="mailto:${emailContacto.valor}" class="btn btn-outline-primary">
                    <i class="bi bi-envelope"></i> Contactar
                </a>
            `;
        }
    }

    // Cargar educación
    function loadEducacion() {
        const container = document.getElementById('educacionContent');
        
        if (!currentProfesor.educacion || currentProfesor.educacion.length === 0) {
            container.innerHTML = '<p class="text-muted">No hay información de educación registrada.</p>';
            return;
        }

        container.innerHTML = currentProfesor.educacion.map(edu => `
            <div class="timeline-item">
                <div class="timeline-badge bg-primary">
                    <i class="bi bi-mortarboard"></i>
                </div>
                <div class="timeline-content">
                    <div class="d-flex justify-content-between align-items-start">
                        <div>
                            <h5>${edu.titulo || edu.nivel}</h5>
                            <p class="text-muted mb-1">${edu.institucion}</p>
                            ${edu.especialidad ? `<p class="small text-info mb-1">Especialidad: ${edu.especialidad}</p>` : ''}
                            ${edu.pais ? `<p class="small text-secondary mb-1">${edu.pais}</p>` : ''}
                            <p class="small">${edu.anioInicio} ${edu.anioFin ? `- ${edu.anioFin}` : '- En curso'}</p>
                        </div>
                        <div class="dropdown">
                            <button class="btn btn-sm btn-outline-secondary dropdown-toggle" data-bs-toggle="dropdown">
                                <i class="bi bi-three-dots"></i>
                            </button>
                            <ul class="dropdown-menu">
                                <li><a class="dropdown-item" href="#" onclick="editEducacion(${edu.educacionId})">Editar</a></li>
                                <li><a class="dropdown-item text-danger" href="#" onclick="deleteEducacion(${edu.educacionId})">Eliminar</a></li>
                            </ul>
                        </div>
                    </div>
                </div>
            </div>
        `).join('');
    }

    // Cargar experiencia
    function loadExperiencia() {
        const container = document.getElementById('experienciaContent');
        
        if (!currentProfesor.experiencia || currentProfesor.experiencia.length === 0) {
            container.innerHTML = '<p class="text-muted">No hay información de experiencia registrada.</p>';
            return;
        }

        container.innerHTML = currentProfesor.experiencia.map(exp => `
            <div class="timeline-item">
                <div class="timeline-badge bg-success">
                    <i class="bi bi-briefcase"></i>
                </div>
                <div class="timeline-content">
                    <div class="d-flex justify-content-between align-items-start">
                        <div>
                            <h5>${exp.puesto}</h5>
                            <p class="text-muted mb-1">${exp.institucion}</p>
                            <p class="small">${formatDate(exp.fechaInicio)} ${exp.fechaFin ? `- ${formatDate(exp.fechaFin)}` : '- Actualidad'}</p>
                            ${exp.descripcion ? `<p class="mt-2">${exp.descripcion}</p>` : ''}
                        </div>
                        <div class="dropdown">
                            <button class="btn btn-sm btn-outline-secondary dropdown-toggle" data-bs-toggle="dropdown">
                                <i class="bi bi-three-dots"></i>
                            </button>
                            <ul class="dropdown-menu">
                                <li><a class="dropdown-item" href="#" onclick="editExperiencia(${exp.experienciaId})">Editar</a></li>
                                <li><a class="dropdown-item text-danger" href="#" onclick="deleteExperiencia(${exp.experienciaId})">Eliminar</a></li>
                            </ul>
                        </div>
                    </div>
                </div>
            </div>
        `).join('');
    }

    // Cargar publicaciones
    function loadPublicaciones() {
        const container = document.getElementById('publicacionesContent');
        
        if (!currentProfesor.publicaciones || currentProfesor.publicaciones.length === 0) {
            container.innerHTML = '<p class="text-muted">No hay publicaciones registradas.</p>';
            return;
        }

        container.innerHTML = currentProfesor.publicaciones.map(pub => `
            <div class="card mb-3">
                <div class="card-body">
                    <div class="d-flex justify-content-between align-items-start">
                        <div class="flex-grow-1">
                            <h6 class="card-title">${pub.titulo}</h6>
                            <p class="small text-muted mb-1">
                                <span class="badge bg-secondary">${pub.tipoPublicacion}</span>
                                <span class="ms-2">${pub.anio}</span>
                            </p>
                            <p class="small mb-1"><strong>Autores:</strong> ${pub.autores}</p>
                            <p class="small mb-1"><strong>Fuente:</strong> ${pub.fuente}</p>
                            ${pub.enlace ? `<a href="${pub.enlace}" target="_blank" class="btn btn-sm btn-outline-primary">Ver publicación</a>` : ''}
                        </div>
                        <div class="dropdown">
                            <button class="btn btn-sm btn-outline-secondary dropdown-toggle" data-bs-toggle="dropdown">
                                <i class="bi bi-three-dots"></i>
                            </button>
                            <ul class="dropdown-menu">
                                <li><a class="dropdown-item" href="#" onclick="editPublicacion(${pub.publicacionId})">Editar</a></li>
                                <li><a class="dropdown-item text-danger" href="#" onclick="deletePublicacion(${pub.publicacionId})">Eliminar</a></li>
                            </ul>
                        </div>
                    </div>
                </div>
            </div>
        `).join('');
    }

    // Cargar proyectos
    function loadProyectos() {
        const container = document.getElementById('proyectosContent');
        
        if (!currentProfesor.proyectos || currentProfesor.proyectos.length === 0) {
            container.innerHTML = '<p class="text-muted">No hay proyectos registrados.</p>';
            return;
        }

        container.innerHTML = currentProfesor.proyectos.map(proy => `
            <div class="card mb-3">
                <div class="card-body">
                    <div class="d-flex justify-content-between align-items-start">
                        <div class="flex-grow-1">
                            <h6 class="card-title">${proy.titulo}</h6>
                            <p class="small text-muted mb-1">
                                <span class="badge bg-info">${proy.rol}</span>
                                <span class="ms-2">${proy.periodoInicio} - ${proy.periodoFin || 'En curso'}</span>
                            </p>
                            <p class="small mb-1"><strong>Institución:</strong> ${proy.institucion}</p>
                            ${proy.financiamiento ? `<p class="small mb-1"><strong>Financiamiento:</strong> ${proy.financiamiento}</p>` : ''}
                            ${proy.numeroProyecto ? `<p class="small mb-1"><strong>No. Proyecto:</strong> ${proy.numeroProyecto}</p>` : ''}
                        </div>
                        <div class="dropdown">
                            <button class="btn btn-sm btn-outline-secondary dropdown-toggle" data-bs-toggle="dropdown">
                                <i class="bi bi-three-dots"></i>
                            </button>
                            <ul class="dropdown-menu">
                                <li><a class="dropdown-item" href="#" onclick="editProyecto(${proy.proyectoId})">Editar</a></li>
                                <li><a class="dropdown-item text-danger" href="#" onclick="deleteProyecto(${proy.proyectoId})">Eliminar</a></li>
                            </ul>
                        </div>
                    </div>
                </div>
            </div>
        `).join('');
    }

    // Cargar tesis dirigidas
    function loadTesisDirigidas() {
        const container = document.getElementById('tesisContent');
        
        if (!currentProfesor.tesisDirigidas || currentProfesor.tesisDirigidas.length === 0) {
            container.innerHTML = '<p class="text-muted">No hay tesis dirigidas registradas.</p>';
            return;
        }

        container.innerHTML = currentProfesor.tesisDirigidas.map(tesis => `
            <div class="card mb-3">
                <div class="card-body">
                    <div class="d-flex justify-content-between align-items-start">
                        <div class="flex-grow-1">
                            <h6 class="card-title">${tesis.titulo}</h6>
                            <p class="small text-muted mb-1">
                                <span class="badge bg-warning">${tesis.nivel}</span>
                                <span class="ms-2">${tesis.anio}</span>
                            </p>
                            <p class="small mb-1"><strong>Autor:</strong> ${tesis.autor}</p>
                            <p class="small mb-1"><strong>Universidad:</strong> ${tesis.universidad}</p>
                        </div>
                        <div class="dropdown">
                            <button class="btn btn-sm btn-outline-secondary dropdown-toggle" data-bs-toggle="dropdown">
                                <i class="bi bi-three-dots"></i>
                            </button>
                            <ul class="dropdown-menu">
                                <li><a class="dropdown-item" href="#" onclick="editTesis(${tesis.tesisId})">Editar</a></li>
                                <li><a class="dropdown-item text-danger" href="#" onclick="deleteTesis(${tesis.tesisId})">Eliminar</a></li>
                            </ul>
                        </div>
                    </div>
                </div>
            </div>
        `).join('');
    }

    // Cargar distinciones
    function loadDistinciones() {
        const container = document.getElementById('distincionesContent');
        
        if (!currentProfesor.distinciones || currentProfesor.distinciones.length === 0) {
            container.innerHTML = '<p class="text-muted">No hay distinciones registradas.</p>';
            return;
        }

        container.innerHTML = currentProfesor.distinciones.map(dist => `
            <div class="card mb-3">
                <div class="card-body">
                    <div class="d-flex justify-content-between align-items-start">
                        <div class="flex-grow-1">
                            <h6 class="card-title">${dist.nombre}</h6>
                            <p class="small text-muted mb-1">
                                <span class="badge bg-warning">${dist.anio}</span>
                            </p>
                            <p class="small mb-1"><strong>Institución:</strong> ${dist.institucion}</p>
                            ${dist.descripcion ? `<p class="small">${dist.descripcion}</p>` : ''}
                        </div>
                        <div class="dropdown">
                            <button class="btn btn-sm btn-outline-secondary dropdown-toggle" data-bs-toggle="dropdown">
                                <i class="bi bi-three-dots"></i>
                            </button>
                            <ul class="dropdown-menu">
                                <li><a class="dropdown-item" href="#" onclick="editDistincion(${dist.distincionId})">Editar</a></li>
                                <li><a class="dropdown-item text-danger" href="#" onclick="deleteDistincion(${dist.distincionId})">Eliminar</a></li>
                            </ul>
                        </div>
                    </div>
                </div>
            </div>
        `).join('');
    }

    // Cargar asociaciones
    function loadAsociaciones() {
        const container = document.getElementById('asociacionesContent');
        
        if (!currentProfesor.asociaciones || currentProfesor.asociaciones.length === 0) {
            container.innerHTML = '<p class="text-muted">No hay asociaciones registradas.</p>';
            return;
        }

        container.innerHTML = currentProfesor.asociaciones.map(asoc => `
            <div class="card mb-3">
                <div class="card-body">
                    <div class="d-flex justify-content-between align-items-start">
                        <div class="flex-grow-1">
                            <h6 class="card-title">${asoc.nombre}</h6>
                            <p class="small text-muted mb-1">
                                <span class="badge bg-info">${asoc.rol}</span>
                                <span class="ms-2">${asoc.periodoInicio} - ${asoc.periodoFin || 'Actual'}</span>
                            </p>
                        </div>
                        <div class="dropdown">
                            <button class="btn btn-sm btn-outline-secondary dropdown-toggle" data-bs-toggle="dropdown">
                                <i class="bi bi-three-dots"></i>
                            </button>
                            <ul class="dropdown-menu">
                                <li><a class="dropdown-item" href="#" onclick="editAsociacion(${asoc.asociacionId})">Editar</a></li>
                                <li><a class="dropdown-item text-danger" href="#" onclick="deleteAsociacion(${asoc.asociacionId})">Eliminar</a></li>
                            </ul>
                        </div>
                    </div>
                </div>
            </div>
        `).join('');
    }

    // Cargar documentos
    function loadDocumentos() {
        const container = document.getElementById('documentosDestacados');
        
        if (!currentProfesor.documentos || currentProfesor.documentos.length === 0) {
            container.innerHTML = '<p class="text-muted small">No hay documentos disponibles.</p>';
            return;
        }

        container.innerHTML = currentProfesor.documentos.map(doc => `
            <div class="d-flex justify-content-between align-items-center mb-2">
                <div>
                    <div class="small fw-bold">${doc.titulo}</div>
                    <div class="text-muted" style="font-size: 0.75rem;">${formatDate(doc.fechaSubida)}</div>
                </div>
                <a href="${doc.url}" target="_blank" class="btn btn-sm btn-outline-primary">
                    <i class="bi bi-download"></i>
                </a>
            </div>
        `).join('');
    }

    // Funciones de utilidad
    function formatDate(dateString) {
        if (!dateString) return '';
        const date = new Date(dateString);
        return date.toLocaleDateString('es-ES', { year: 'numeric', month: 'long' });
    }

    // Funciones CRUD (para implementar)
    function addEducacion() { console.log('Agregar educación'); }
    function editEducacion(id) { console.log('Editar educación:', id); }
    function deleteEducacion(id) { console.log('Eliminar educación:', id); }

    function addExperiencia() { console.log('Agregar experiencia'); }
    function editExperiencia(id) { console.log('Editar experiencia:', id); }
    function deleteExperiencia(id) { console.log('Eliminar experiencia:', id); }

    function addPublicacion() { console.log('Agregar publicación'); }
    function editPublicacion(id) { console.log('Editar publicación:', id); }
    function deletePublicacion(id) { console.log('Eliminar publicación:', id); }

    function addProyecto() { console.log('Agregar proyecto'); }
    function editProyecto(id) { console.log('Editar proyecto:', id); }
    function deleteProyecto(id) { console.log('Eliminar proyecto:', id); }

    function addTesis() { console.log('Agregar tesis'); }
    function editTesis(id) { console.log('Editar tesis:', id); }
    function deleteTesis(id) { console.log('Eliminar tesis:', id); }

    function addDistincion() { console.log('Agregar distinción'); }
    function editDistincion(id) { console.log('Editar distinción:', id); }
    function deleteDistincion(id) { console.log('Eliminar distinción:', id); }

    function addAsociacion() { console.log('Agregar asociación'); }
    function editAsociacion(id) { console.log('Editar asociación:', id); }
    function deleteAsociacion(id) { console.log('Eliminar asociación:', id); }

    // Inicialización
    document.addEventListener('DOMContentLoaded', function() {
        loadProfesorData();

        // Event listeners
        document.getElementById('printCVBtn').addEventListener('click', function() {
            window.print();
        });

        document.getElementById('editProfileBtn').addEventListener('click', function() {
            // Redirigir a página de edición o abrir modal
            console.log('Editar perfil del profesor');
        });
    });
    </script>
</body>
</html> 